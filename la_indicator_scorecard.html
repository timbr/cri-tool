<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="generator" content="Observable Framework v1.11.0">
<title>Scorecard | CRI Index for England Tool</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_observablehq/theme-air,near-midnight.6e6037b3.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_observablehq/theme-air,near-midnight.6e6037b3.css">
<link rel="modulepreload" href="./_observablehq/client.085f727e.js">
<link rel="modulepreload" href="./_observablehq/runtime.a4b34474.js">
<link rel="modulepreload" href="./_observablehq/stdlib.43ec6990.js">
<link rel="modulepreload" href="./_import/components/url_params.fb45fdf3.js">
<link rel="modulepreload" href="./_import/components/cri_button.27dc32d4.js">
<link rel="modulepreload" href="./_import/components/heatDot.930742c3.js">
<link rel="modulepreload" href="./_npm/htl@0.3.1/063eb405.js">
<link rel="modulepreload" href="./_npm/d3-dsv@3.0.1/407f7a1f.js">
<link rel="modulepreload" href="./_observablehq/stdlib/xlsx.116588a6.js">
<link rel="modulepreload" href="./_npm/exceljs@4.4.0/130ea17b.js">
<link rel="icon" href="./_file/img/observable.1af93621.png" type="image/png" sizes="32x32">
<script type="module">

import {define} from "./_observablehq/client.085f727e.js";
import {registerFile} from "./_observablehq/stdlib.43ec6990.js";

registerFile("./data/CRIindicators.xlsx", {"name":"./data/CRIindicators.xlsx","mimeType":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","path":"./_file/data/CRIindicators.71f37d44.xlsx","lastModified":1726764409239,"size":15180});
registerFile("./data/geogranks_powerBI_v2.csv", {"name":"./data/geogranks_powerBI_v2.csv","mimeType":"text/csv","path":"./_file/data/geogranks_powerBI_v2.dc882123.csv","lastModified":1726605635004,"size":419488});

define({id: "8039611a", outputs: ["urlParams","criButton","heatDot"], body: async () => {
const [{urlParams}, {criButton}, {heatDot}] = await Promise.all([import("./_import/components/url_params.fb45fdf3.js"), import("./_import/components/cri_button.27dc32d4.js"), import("./_import/components/heatDot.930742c3.js")]);

return {urlParams,criButton,heatDot};
}});

define({id: "add3f49c", inputs: ["FileAttachment"], outputs: ["cr_data"], body: (FileAttachment) => {
const cr_data = FileAttachment("./data/geogranks_powerBI_v2.csv").csv({typed: true});
return {cr_data};
}});

define({id: "7fba5a87", inputs: ["cr_data","urlParams"], outputs: ["la_data"], body: (cr_data,urlParams) => {
var la_data = cr_data.find(data => data.lac === urlParams('la'))
return {la_data};
}});

define({id: "e5a077d0", mode: "inline", inputs: ["la_data","display"], body: async (la_data,display) => {
display(await(
la_data.lan
))
}});

define({id: "c8c35c32", mode: "inline", inputs: ["criButton","urlParams","display"], body: async (criButton,urlParams,display) => {
display(await(
criButton('Back to Local authority view', './la_view', urlParams('la'))
))
}});

define({id: "a7e4a066", inputs: ["FileAttachment"], outputs: ["criIndicators"], body: (FileAttachment) => {
const criIndicators = FileAttachment("./data/CRIindicators.xlsx").xlsx();
return {criIndicators};
}});

define({id: "cd1862c5", inputs: ["criIndicators","la_data"], outputs: ["indctr_data"], body: (criIndicators,la_data) => {
var indctr_data = criIndicators.sheet(0, { headers: true })
indctr_data = indctr_data.map(item => ({
  ...item,
  Direction: item.Direction === '+' ? true : false
}));
// remove indicators that have no value
indctr_data = indctr_data.filter(item => la_data[item.varlab1] !== undefined);
return {indctr_data};
}});

define({id: "e705686c", inputs: ["indctr_data","la_data"], body: (indctr_data,la_data) => {
// sort the data by rank, low number to high
indctr_data.sort((a, b) => {
  const valA = la_data[a.varlab1];
  const valB = la_data[b.varlab1];

  // Compare numbers
  return valA - valB;
});
}});

define({id: "ee6a6254", body: () => {
// View the table for debug purposes
// Inputs.table(indctr_data)
}});

define({id: "d539fcec", outputs: ["subIndex"], body: () => {
var subIndex = {
  1: '1 - Access and Infrastructure',
  2: '2 - Economic Well-being and Opportunity',
  3: '3 - Social Capital and Connectivity',
  4: '4 - Diversity and Inclusion',
  5: '5 - Equity and Stability',

}
return {subIndex};
}});

define({id: "6ad28bd2", inputs: ["html","indctr_data","subIndex","heatDot","la_data"], outputs: ["indicatorTable"], body: (html,indctr_data,subIndex,heatDot,la_data) => {
function indicatorTable(){

  return html`<table style="width: 180px;">
  <table>
  <thead>
  <tr>
    <th>Indicator</th>
    <th>Sub Index</th>
    <th>National Rank</th>
  </tr>
  </thead>
  <tbody>${indctr_data.map((indctr) => html.fragment`
  <tr>
    <td>${indctr.Description_short}</td>
    <td>${subIndex[indctr.Subindex]}</td>
    <td>${heatDot(la_data[indctr.varlab1], 1, 307, false)} ${la_data[indctr.varlab1]}</td>
  </tr>`)}
  </tbody>
  </table>`
}
return {indicatorTable};
}});

define({id: "635c1e33", mode: "inline", inputs: ["indicatorTable","display"], body: async (indicatorTable,display) => {
display(await(
indicatorTable()
))
}});

</script>
<div id="observablehq-center">
<main id="observablehq-main" class="observablehq">
<h1 id="scorecard" tabindex="-1"><a class="observablehq-header-anchor" href="#scorecard">Scorecard</a></h1>
<div class="observablehq observablehq--block"><!--:8039611a:--></div>
<div class="observablehq observablehq--block"><!--:add3f49c:--></div>
<div class="observablehq observablehq--block"><!--:7fba5a87:--></div>
<br>
<h3 id="" tabindex="-1"><a class="observablehq-header-anchor" href="#"><observablehq-loading></observablehq-loading><!--:e5a077d0:--></a></h3>
<p><observablehq-loading></observablehq-loading><!--:c8c35c32:--></p>
<div class="observablehq observablehq--block"><!--:a7e4a066:--></div>
<div class="observablehq observablehq--block"><!--:cd1862c5:--></div>
<div class="observablehq observablehq--block"><!--:e705686c:--></div>
<div class="observablehq observablehq--block"><!--:ee6a6254:--></div>
<div class="observablehq observablehq--block"><!--:d539fcec:--></div>
<div class="observablehq observablehq--block"><!--:6ad28bd2:--></div>
<p><observablehq-loading></observablehq-loading><!--:635c1e33:--></p>
</main>
<footer id="observablehq-footer">
<div>Built with <a href="https://observablehq.com/" target="_blank" rel="noopener noreferrer">Observable</a> on <a title="2024-09-28T18:18:37">Sep 28, 2024</a>.</div>
</footer>
</div>
